{% extends "layout.html" %}
{% block content %}
    <h1 class="mb-3">Posts by {{ user.user_name }}({{ total_posts }})</h1>
    {% for post in posts %}
        <article class="media content-section">
            <img class="rounded-circle article-img" src="{{ url_for('static', filename='profile_pics/' + post.image_file) }}">
            <div class="media-body">
            <div class="article-metadata">
                <a class="mr-2" href="{{ url_for('users.user_posts', user_name=post.user_name) }}">{{ post.user_name }}</a>
                <small class="text-muted">{{ post.post_date }}</small>
            </div>
            <h2><a class="article-title" href="{{ url_for('posts.post', post_id=post.post_id) }}">{{ post.title }}</a></h2>
            <p class="article-content">{{ post.content }}</p>
            </div>
        </article>
    {% endfor %}
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            {% if page == 1 %}
                <li class="page-item disabled"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=1) }}">First</a></li>
                <li class="page-item active"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page) }}">{{ page }}</a></li>
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page+1) }}">{{ page+1 }}</a></li>
                {% if page+2 <= total_pages %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page+2) }}">{{ page+2 }}</a></li>
                {% endif %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=total_pages) }}">Last</a></li>
            {% else %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=1) }}">First</a></li>
                {% if page == total_pages %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page-2) }}">{{ page-2 }}</a></li>
                {% endif %}
                {% if page-1 >= 1 %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page-1) }}">{{ page-1 }}</a></li>
                {% endif %}
                <li class="page-item active"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page) }}">{{ page }}</a></li>
                {% if page+1 <= total_pages %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=page+1) }}">{{ page+1 }}</a></li>
                {% endif %}
                {% if page == total_pages %}
                <li class="page-item disabled"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=total_pages) }}">Last</a></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="{{ url_for('users.user_posts', user_name=user.user_name, page=total_pages) }}">Last</a></li>
                {% endif %}
            {% endif %}
        </ul>
      </nav>
{% endblock content %}
